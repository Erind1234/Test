@model InApps.Models.EmpModel

<head>
    <!-- ... your existing head content ... -->
    <style>
        /* Add CSS styles for centering the content */
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        .form-group {
            display: flex;
            align-items: center;
        }

        .search-group {
            display: flex;
            align-items: center;
        }

        .search-box {
            width: 300px;
        }
        
        /* Add other CSS styles as needed */
        
        /* Add CSS styles for the freezing search box */
        .freeze-search-box {
            position: absolute;
            top: 0;
            left: 0;
            background-color: white;
            z-index: 1;
        }

        /* Add CSS styles for the table container */
        .table-container {
            margin-top: 20px;
            margin-left: 350px; /* Adjust the margin-left as needed */
            width: calc(100% - 350px); /* Adjust the width as needed */
        }

        /* Add CSS styles for freezing the table */
        .fixed-table {
            position: fixed;
            top: 80px; /* Adjust the top position as needed */
            left: 350px; /* Adjust the left position as needed */
            width: calc(100% - 350px); /* Adjust the width as needed */
            max-height: 200px; /* Adjust the max-height as needed */
            overflow-y: auto;
            z-index: 1;
        }

        /* Add CSS styles for the popup */
        .popup {
            /* ... your existing popup styles ... */
            z-index: 2;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="search-group">
            @using (Html.BeginForm("Index", "Fiscalization", FormMethod.Post))
            {
                <div class="form-group">
                    <input type="text" name="searchBox" class="form-control search-box" placeholder="Klikoni per te skanuar:" />
                    <button type="submit" class="btn btn-primary ml-2">Scan</button>
                </div>
            }
            <div class="freeze-search-box" id="freezeSearchBox" style="display: none;"></div>
        </div>

        <div class="form-group mt-4">
            <input type="text" id="REFCODE" class="form-control search-box" placeholder="Enter REFCODE" />
            <button id="searchByRefcode" class="btn btn-success ml-2">Kerko me Teller Reference</button>
        </div>

        <div id="resultTable" class="table-container" style="display: none;">
            <!-- Table content will be displayed here -->
        </div>

        <div class="fixed-table">
            @if (!string.IsNullOrEmpty(ViewBag.p1))
            {
                using (Html.BeginForm("SaveFiscalization", "Fiscalization", FormMethod.Post))
                {
                    <!-- ... your existing form content ... -->
                }
            }
        </div>

        <div class="popup" id="popupWindow" style="display: none;">
            <h3>Saved Data</h3>
            <p> @ViewBag.savedData</p>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        $(document).ready(function () {
            // Add an event listener for the "Search by REFCODE" button
            $("#searchByRefcode").click(function () {
                var refcode = $("#REFCODE").val();
                if (refcode !== "") {
                    $.post("/Fiscalization/SearchByRefcode", { REFCODE: refcode }, function (data) {
                        $("#resultTable").html(data);
                        $("#resultTable").show();
                    });
                }
            });
            
            // Add an event listener for the first search box
            $("input[name='searchBox']").on("input", function () {
                var searchTerm = $(this).val();
                $("#freezeSearchBox").text(searchTerm).show();
            });
        });

        // Function to delete row
        function deleteRow() {
            if (confirm("Are you sure you want to delete this row?")) {
                // Add your delete logic here
            }
        }
    </script>
</body>
</html>
