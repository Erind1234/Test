<!DOCTYPE html>
<html>
<head>
    <title>Index</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            // Handle form submission
            $("form").submit(function (event) {
                event.preventDefault();
                var formData = $(this).serialize();
                
                $.ajax({
                    url: "@Url.Action("SaveFiscalization")",
                    type: "POST",
                    data: formData,
                    success: function (result) {
                        // Show the popup with the result
                        $("#popupContent").html(result);
                        $("#popupContainer").show();
                    }
                });
            });
            
            // Handle popup close button click
            $("#popupCloseButton").click(function () {
                $("#popupContainer").hide();
            });
        });
    </script>
    <style>
        #popupContainer {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 9999;
        }
        
        #popupContent {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #fff;
            padding: 20px;
            border-radius: 5px;
        }
        
        #popupCloseButton {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Fiscalization</h1>
    
    @using (Html.BeginForm("SaveFiscalization", "Fiscalization", FormMethod.Post))
    {
        <input type="text" name="searchBox" />
        <input type="submit" value="Search" />
    }
    
    <div id="popupContainer">
        <div id="popupContent">
            <h2>Popup Content</h2>
            <div id="popupResult">
                <!-- Result will be loaded here -->
            </div>
            <button id="popupCloseButton">Close</button>
        </div>
    </div>
    
    <table>
        <tr>
            <th>Property 1</th>
            <th>Property 2</th>
            <th>Property 3</th>
        </tr>
        <tr>
            <td>@Model.Property1</td>
            <td>@Model.Property2</td>
            <td>@Model.Property3</td>
        </tr>
    </table>

    <h2>Fiscalization Form</h2>

    @using (Html.BeginForm("SaveFiscalization", "Fiscalization", FormMethod.Post))
    {
        @Html.LabelFor(model => model.Property1)
        @Html.TextBoxFor(model => model.Property1)
    
        @Html.LabelFor(model => model.Property2)
        @Html.TextBoxFor(model => model.Property2)
    
        @Html.LabelFor(model => model.Property3)
        @Html.TextBoxFor(model => model.Property3)
    
        <input type="submit" value="Save" />
    }
</body>
</html>
